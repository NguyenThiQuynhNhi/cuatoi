<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notification Settings</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,600;1,9..144,400&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['"DM Sans"', "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>

    <style>
      * {
        font-family: "DM Sans", sans-serif;
      }
      h1 {
        font-family: "Fraunces", serif;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateX(6px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .animate-fadeIn {
        animation: fadeIn 0.2s ease-out forwards;
      }

      /* Custom select arrow */
      .custom-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2.5'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 12px;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-slate-50 via-stone-50 to-amber-50/30 pb-28"
  >
    <div class="max-w-2xl mx-auto px-4 pt-10 pb-20">
      <!-- Header -->
      <div class="flex items-start gap-3 mb-1">
        <div class="w-1 h-8 rounded-full bg-amber-400 mt-1 flex-shrink-0"></div>
        <div>
          <h1 class="text-3xl font-semibold text-slate-900 leading-tight">
            Notification Settings
          </h1>
          <p class="text-sm text-slate-400 mt-1.5 leading-relaxed max-w-md">
            Customize your email notifications. All notifications will be sent
            to your on-site chat by default. You can choose whether or not to
            receive them via email.
          </p>
        </div>
      </div>

      <!-- Master Toggle -->
      <div
        id="master-card"
        class="mt-6 flex items-center justify-between bg-white rounded-2xl border px-5 py-4 shadow-sm transition-all duration-300 border-amber-200 shadow-amber-50"
      >
        <div>
          <p class="text-sm font-semibold text-slate-800">
            Receive notifications via email
          </p>
          <p class="text-xs text-slate-400 mt-0.5">
            Master switch for all email notifications below
          </p>
        </div>
        <button
          id="master-toggle"
          type="button"
          role="switch"
          aria-checked="true"
          class="relative inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 bg-amber-400"
        >
          <span
            id="master-knob"
            class="pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform duration-300 translate-x-6"
          ></span>
        </button>
      </div>

      <!-- Sections Container -->
      <div
        id="sections"
        class="mt-6 space-y-6 transition-opacity duration-300 opacity-100"
      >
        <!-- Section 1 -->
        <div
          class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden"
        >
          <div class="px-6 py-3.5 border-b border-slate-50 bg-slate-50/70">
            <h2
              class="text-xs font-bold text-slate-400 uppercase tracking-widest"
            >
              Property & Service Updates
            </h2>
          </div>
          <div class="px-6 divide-y divide-slate-50">
            <!-- Item 1 -->
            <div
              id="s1i1-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                  <p class="text-sm font-semibold text-slate-800 leading-snug">
                    Saved Property Updates
                  </p>
                </div>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  Price drops and information updates for saved/followed
                  properties
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s1i1-control"></div>
            </div>

            <!-- Item 2 -->
            <div
              id="s1i2-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                  <p class="text-sm font-semibold text-slate-800 leading-snug">
                    Saved Search Matches
                  </p>
                </div>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  New property matches for your search criteria
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s1i2-control"></div>
            </div>

            <!-- Item 3 -->
            <div
              id="s1i3-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                  <p class="text-sm font-semibold text-slate-800 leading-snug">
                    New Service Proposals
                  </p>
                </div>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  New service proposals matching your requests
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s1i3-control"></div>
            </div>
          </div>
        </div>

        <!-- Section 2 -->
        <div
          class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden"
        >
          <div class="px-6 py-3.5 border-b border-slate-50 bg-slate-50/70">
            <h2
              class="text-xs font-bold text-slate-400 uppercase tracking-widest"
            >
              Proposals & Replies
            </h2>
          </div>
          <div class="px-6 divide-y divide-slate-50">
            <!-- Item 1 -->
            <div
              id="s2i1-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                  <p class="text-sm font-semibold text-slate-800 leading-snug">
                    Agent Communications
                  </p>
                </div>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  Direct property proposals, replies, and messages from agents
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s2i1-control"></div>
            </div>

            <!-- Item 2 -->
            <div
              id="s2i2-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                  <p class="text-sm font-semibold text-slate-800 leading-snug">
                    Support Communications
                  </p>
                </div>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  Direct service proposals, replies, and messages from support
                  accounts
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s2i2-control"></div>
            </div>
          </div>
        </div>

        <!-- Section 3 -->
        <div
          class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden"
        >
          <div class="px-6 py-3.5 border-b border-slate-50 bg-slate-50/70">
            <h2
              class="text-xs font-bold text-slate-400 uppercase tracking-widest"
            >
              Other Notifications
            </h2>
          </div>
          <div class="px-6 divide-y divide-slate-50">
            <div
              id="s3i1-row"
              class="flex items-start justify-between gap-6 py-4 transition-opacity duration-200 opacity-100"
            >
              <div class="flex-1 min-w-0">
                <p class="text-sm font-semibold text-slate-800 leading-snug">
                  Promotional Messages
                </p>
                <p class="text-xs text-slate-400 mt-0.5 leading-relaxed">
                  Promotional messages and offers from agents or support
                  accounts
                </p>
              </div>
              <div class="flex-shrink-0 pt-0.5" id="s3i1-control"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Fixed Footer -->
    <div
      class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-slate-100 shadow-lg z-10"
    >
      <div
        class="max-w-2xl mx-auto px-4 py-3.5 flex items-center justify-between"
      >
        <p class="text-xs text-slate-400 hidden sm:block">
          Changes are saved per notification type
        </p>
        <div class="flex items-center gap-3 ml-auto">
          <button
            class="px-5 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-slate-300"
          >
            Cancel
          </button>
          <button
            class="px-5 py-2 text-sm font-semibold text-white bg-slate-900 rounded-xl hover:bg-slate-700 transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 shadow-sm"
          >
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <script>
      // ============================================================================
      // Constants
      // ============================================================================
      const TIMES = [
        "06:00 AM",
        "07:00 AM",
        "08:00 AM",
        "09:00 AM",
        "10:00 AM",
        "11:00 AM",
        "12:00 PM",
        "01:00 PM",
        "02:00 PM",
        "03:00 PM",
        "04:00 PM",
        "05:00 PM",
        "06:00 PM",
        "07:00 PM",
        "08:00 PM",
      ];
      const DAYS = [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday",
      ];
      const STANDARD_FREQ = ["Immediately", "Daily", "Weekly", "Off"];
      const URGENT_FREQ = ["Immediately", "Off"];

      // ============================================================================
      // State
      // ============================================================================
      let emailEnabled = true;

      const states = {
        s1i1: { freq: "Immediately", time: "09:00 AM", day: "Monday" },
        s1i2: { freq: "Daily", time: "09:00 AM", day: "Monday" },
        s1i3: { freq: "Weekly", time: "09:00 AM", day: "Monday" },
        s2i1: { freq: "Immediately", time: "09:00 AM", day: "Monday" },
        s2i2: { freq: "Immediately", time: "09:00 AM", day: "Monday" },
        s3i1: { freq: "Off", time: "09:00 AM", day: "Monday" },
      };

      // ============================================================================
      // Helpers
      // ============================================================================
      function createSelect(options, selected, onChange) {
        const sel = document.createElement("select");
        sel.className =
          "custom-select appearance-none bg-white border border-slate-200 text-slate-700 text-sm font-medium rounded-lg px-3 py-2 pr-8 cursor-pointer focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-transparent transition-all hover:border-slate-300";
        options.forEach((opt) => {
          const option = document.createElement("option");
          option.value = opt;
          option.textContent = opt;
          if (opt === selected) option.selected = true;
          sel.appendChild(option);
        });
        sel.addEventListener("change", (e) => onChange(e.target.value));
        return sel;
      }

      function renderFrequencyControl(container, id, isUrgent = false) {
        const state = states[id];
        const freqOptions = isUrgent ? URGENT_FREQ : STANDARD_FREQ;

        container.innerHTML = "";

        const wrapper = document.createElement("div");
        wrapper.className = "flex items-center gap-2 flex-wrap justify-end";

        // Frequency select
        const freqSelect = createSelect(freqOptions, state.freq, (val) => {
          state.freq = val;
          renderFrequencyControl(container, id, isUrgent);
          updateRowOpacity(id);
        });
        wrapper.appendChild(freqSelect);

        if (!isUrgent) {
          if (state.freq === "Daily") {
            const div = document.createElement("div");
            div.className = "flex items-center gap-1.5 animate-fadeIn";

            const label = document.createElement("span");
            label.className = "text-xs text-slate-400 font-medium";
            label.textContent = "Time";
            div.appendChild(label);

            const timeSelect = createSelect(TIMES, state.time, (val) => {
              state.time = val;
            });
            div.appendChild(timeSelect);
            wrapper.appendChild(div);
          }

          if (state.freq === "Weekly") {
            const group = document.createElement("div");
            group.className =
              "flex items-center gap-2 animate-fadeIn flex-wrap justify-end";

            // Day
            const dayDiv = document.createElement("div");
            dayDiv.className = "flex items-center gap-1.5";
            const dayLabel = document.createElement("span");
            dayLabel.className = "text-xs text-slate-400 font-medium";
            dayLabel.textContent = "Day";
            dayDiv.appendChild(dayLabel);
            const daySelect = createSelect(DAYS, state.day, (val) => {
              state.day = val;
            });
            dayDiv.appendChild(daySelect);

            // Time
            const timeDiv = document.createElement("div");
            timeDiv.className = "flex items-center gap-1.5";
            const timeLabel = document.createElement("span");
            timeLabel.className = "text-xs text-slate-400 font-medium";
            timeLabel.textContent = "Time";
            timeDiv.appendChild(timeLabel);
            const timeSelect = createSelect(TIMES, state.time, (val) => {
              state.time = val;
            });
            timeDiv.appendChild(timeSelect);

            group.appendChild(dayDiv);
            group.appendChild(timeDiv);
            wrapper.appendChild(group);
          }
        }

        container.appendChild(wrapper);
      }

      function updateRowOpacity(id) {
        const row = document.getElementById(id + "-row");
        if (!row) return;
        const isOff = states[id].freq === "Off";
        row.classList.toggle("opacity-50", isOff);
        row.classList.toggle("opacity-100", !isOff);
      }

      function initAllControls() {
        renderFrequencyControl(document.getElementById("s1i1-control"), "s1i1");
        renderFrequencyControl(document.getElementById("s1i2-control"), "s1i2");
        renderFrequencyControl(document.getElementById("s1i3-control"), "s1i3");
        renderFrequencyControl(
          document.getElementById("s2i1-control"),
          "s2i1",
          true,
        );
        renderFrequencyControl(
          document.getElementById("s2i2-control"),
          "s2i2",
          true,
        );
        renderFrequencyControl(document.getElementById("s3i1-control"), "s3i1");

        // Initial opacity
        Object.keys(states).forEach(updateRowOpacity);
      }

      // Master toggle
      const masterToggle = document.getElementById("master-toggle");
      const masterKnob = document.getElementById("master-knob");
      const masterCard = document.getElementById("master-card");
      const sections = document.getElementById("sections");

      masterToggle.addEventListener("click", () => {
        emailEnabled = !emailEnabled;
        masterToggle.setAttribute("aria-checked", emailEnabled);

        masterToggle.classList.toggle("bg-amber-400", emailEnabled);
        masterToggle.classList.toggle("bg-slate-200", !emailEnabled);

        masterKnob.classList.toggle("translate-x-6", emailEnabled);
        masterKnob.classList.toggle("translate-x-1", !emailEnabled);

        masterCard.classList.toggle("border-amber-200", emailEnabled);
        masterCard.classList.toggle("shadow-amber-50", emailEnabled);
        masterCard.classList.toggle("border-slate-100", !emailEnabled);

        sections.classList.toggle("opacity-100", emailEnabled);
        sections.classList.toggle("opacity-40", !emailEnabled);
        sections.classList.toggle("pointer-events-none", !emailEnabled);
      });

      // Init
      initAllControls();
    </script>
  </body>
</html>
